(this["webpackJsonpsecret-notes"]=this["webpackJsonpsecret-notes"]||[]).push([[4],{191:function(e,t,a){},343:function(e,t,a){},418:function(e,t,a){"use strict";a.r(t);var n=a(390),o=a(2),r=a.n(o),s=a(13),l=a(14),i=a(16),c=a(15),m=a(17),d=a(0),u=a.n(d),p=a(81),h=a(10),f=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={isEditable:a.props.isEditable},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"notes-header"},u.a.createElement("input",{disabled:!this.state.isEditable,style:{borderBottomColor:this.state.isEditable&&"black"},className:"text-input",value:this.props.notebookHeader,onChange:this.props.onChangeNoteBookName}))}}]),t}(d.Component),b=a(335),g=a.n(b),N=(a(191),a(414)),E=a(344),k=a.n(E),v=a(345),C=a.n(v),y=a(417),O=a(200),D=a(415),S=a(337),j=a(341),x=a.n(j),w=a(419),I=a(413),M=a(421),T=a(420),A=u.a.forwardRef((function(e,t){return u.a.createElement(T.a,Object.assign({direction:"down",ref:t},e))})),U=function(e){return u.a.createElement("div",null,u.a.createElement(w.a,{open:!0,TransitionComponent:A,keepMounted:!0,onClose:e.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},u.a.createElement("div",{style:{padding:10}},u.a.createElement(M.a,{id:"alert-dialog-slide-title"},"Are You Sure To Delete This ".concat(e.text,"?")),u.a.createElement(I.a,null,u.a.createElement("div",{className:"div-center"},u.a.createElement("button",{type:"submit",className:"btn btn-accent red-button",onClick:e.onConfirm},"Confirm"))))))},_=(a(343),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={isPaletteShown:!1,color:a.props.color,id:a.props.id,date:a.props.date,isOld:a.props.isOld,completed:a.props.completed,isSaved:!1,isLoading:!1,isEditing:!1,title:a.props.title,description:a.props.description,modalDelete:!1},a.togglePalette=function(){a.setState({isPaletteShown:!a.state.isPaletteShown})},a.setColor=function(e){a.togglePalette(),a.setState({color:e})},a.onTitleChange=function(e){a.setState({title:e.target.value})},a.ondescriptionChange=function(e){a.setState({description:e.target.value})},a.showNewDate=function(){var e=new Date,t=e.getUTCMonth()+1;return e.getUTCDate()+"/"+t+"/"+e.getUTCFullYear()},a.getDate=function(){return a.state.isOld&&a.state.date?a.formatDate(a.state.date):a.showNewDate()},a.createNote=function(){var e=a.state,t=e.title,n=e.description,o=e.color;a.isAllowed(t)&&(a.props.createNote({title:t,description:n,color:o}),a.setState({title:"",description:"",color:"#fff"}))},a.onCardEdit=function(){a.setState({isEditing:!0})},a.onDoneEdit=function(){a.setState({isEditing:!1});var e={title:a.state.title,description:a.state.description,color:a.state.color,completed:a.state.completed};a.props.onNoteUpdate(e,a.state.id)},a.openModalDelete=function(){a.setState({modalDelete:!0})},a.closeModalDelete=function(){a.setState({modalDelete:!1})},a.onConfirmDelete=function(){a.closeModalDelete(),a.props.onNoteDelete(a.state.id)},a.onCheckChange=function(){return a.setState({completed:!a.state.completed},(function(){return a.onDoneEdit()}))},a.isAllowed=function(e){return e.length>0},a.renderIcons=function(){return a.state.isOld&&!a.state.isEditing?u.a.createElement("div",{className:"flex-center",style:{marginTop:10}},u.a.createElement(S.a,{icon:O.a,style:{marginRight:"20%"},className:"icon",onClick:a.onCardEdit}),u.a.createElement(S.a,{icon:O.b,className:"icon",onClick:a.openModalDelete})):u.a.createElement("div",{className:"flex-center",style:{marginTop:10}},u.a.createElement(k.a,{className:"icon",onClick:a.togglePalette}),u.a.createElement(C.a,{style:{marginLeft:"15%"},className:"icon",onClick:function(){a.state.isEditing?a.onDoneEdit():a.createNote()}}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"formatDate",value:function(e){var t=e.getFullYear();return(1+e.getMonth()).toString().padStart(2,"0")+"/"+e.getDate().toString().padStart(2,"0")+"/"+t}},{key:"render",value:function(){var e=this,t=this.state,a=t.isOld,n=t.isSaved,o=t.title,r=t.description,s=t.isEditing,l=t.modalDelete,i=t.completed;return u.a.createElement(x.a,{allowAnyClick:!0,disabled:!a||s},u.a.createElement("div",{className:"note-item",style:{backgroundColor:this.state.color,textDecoration:i?"line-through":""}},u.a.createElement("div",{className:"header"},u.a.createElement("input",{className:"input-header",style:{textDecoration:i?"line-through":""},placeholder:"Type a Title...",onChange:this.onTitleChange,value:o,disabled:!s&&a}),u.a.createElement("h6",{style:{opacity:.5}},this.getDate())),u.a.createElement(N.a,null),u.a.createElement("div",{className:"note-description-container"},u.a.createElement("textarea",{className:"textarea-styles",placeholder:"Type Your Note...",onChange:this.ondescriptionChange,value:r,disabled:!s&&a}),this.renderIcons(),this.state.isPaletteShown&&u.a.createElement("div",{className:"color-palette-container"},u.a.createElement("div",{className:"circle",style:{backgroundColor:"#BCE0FF"},onClick:function(){return e.setColor("#BCE0FF")}}),u.a.createElement("div",{className:"circle",style:{backgroundColor:"#a5feba"},onClick:function(){return e.setColor("#a5feba")}}),u.a.createElement("div",{className:"circle",style:{backgroundColor:"#feeda5"},onClick:function(){return e.setColor("#feeda5")}}),u.a.createElement("div",{className:"circle",style:{backgroundColor:"#ffb2b2"},onClick:function(){return e.setColor("#ffb2b2")}}),u.a.createElement("div",{className:"circle",style:{backgroundColor:"#b0A4E6"},onClick:function(){return e.setColor("#b0A4E6")}}),u.a.createElement("div",{className:"circle",style:{backgroundColor:"#fff"},onClick:function(){return e.setColor("#fff")}}))),a&&!s&&u.a.createElement(y.a,{className:"checkbox",value:i,checked:i,color:"primary",style:{color:i?"#007bff":"gray"},onChange:this.onCheckChange}),n&&!a&&u.a.createElement("h6",{className:"text-bottom "},"Not Saved"),this.state.isLoading&&u.a.createElement(D.a,{className:"loading"}),l&&u.a.createElement(U,{handleClose:this.closeModalDelete,onConfirm:this.onConfirmDelete,text:"Note"})))}}]),t}(d.Component)),P=a(18),F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={token:a.props.token,userData:a.props.userData,notes:a.props.notes,NotebookId:a.props.NotebookId},a.uploadNote=function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(P.o)(e,a.state.NotebookId,a.state.token));case 2:t=n.sent,a.refreshNotes(t.data.notes);case 4:case"end":return n.stop()}}))},a.onNoteDelete=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Object(P.j)(a.state.NotebookId,e,a.state.token).then((function(e){return a.refreshNotes(e.data.notes)}));case 1:case"end":return t.stop()}}))},a.onNoteUpdate=function(e,t){var n;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(Object(P.k)(a.state.NotebookId,t,e,a.state.token));case 2:n=o.sent,a.refreshNotes(n.data.notes);case 4:case"end":return o.stop()}}))},a.showStartMessage=function(){return u.a.createElement("div",{className:"welcome-message-container"},u.a.createElement("div",{className:"error__content"},u.a.createElement("h2",{style:{fontSize:50}},"Welcome"),u.a.createElement("h3",{style:{fontSize:30}},"Create a new Notebook to Start using the App")))},a.renderNotes=function(e){return a.props.firstNotebook?e.length>0&&e.map((function(e){return u.a.createElement(_,{key:e._id,title:e.note.title,description:e.note.description,completed:e.note.completed,color:e.note.color,isOld:!0,id:e._id,onNoteDelete:a.onNoteDelete,onNoteUpdate:a.onNoteUpdate})})):a.showStartMessage()},a.refreshNotes=function(e){return a.setState(a.setState({notes:[]},(function(){return a.setState({notes:e})})))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.notes,t=this.props,a=t.loading,n=t.firstNotebook;return u.a.createElement(g.a,null,!a&&u.a.createElement("div",{className:"notes-body"},n&&u.a.createElement(_,{createNote:this.uploadNote,color:"#fff",description:"",title:"",isOld:!1}),this.renderNotes(e)))}}]),t}(d.Component),L=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={token:a.props.token,userData:a.props.userData,notes:a.props.notes,NotebookId:a.props.NotebookId,isEditable:a.props.isEditable},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.userData,a=e.token,n=e.NotebookId;return u.a.createElement("div",{className:"notes-main"},u.a.createElement(f,{notebookHeader:this.props.notebookHeader,isEditable:this.props.isEditable,onChangeNoteBookName:this.props.onChangeNoteBookName,key:this.props.isEditable}),u.a.createElement(F,{userData:t,token:a,notes:this.props.notes,NotebookId:n,firstNotebook:this.props.firstNotebook,key:this.props.notes,loading:this.props.loading}),u.a.createElement("div",{className:"loading-main-container"},u.a.createElement(D.a,{className:"loading-main",thickness:.2,style:{display:this.props.loading?"":"none"}})))}}]),t}(d.Component),z=a(98),H=a.n(z),Y=function(e){return u.a.createElement("div",{className:"main-navbar"},u.a.createElement(p.v,{className:"align-items-stretch bg-white flex-md-nowrap border-bottom p-0",type:"light"},u.a.createElement(p.w,{className:"w-100 ml-0",href:"#",style:{lineHeight:"25px",position:"relative"}},u.a.createElement("div",{className:"d-table m-auto"},u.a.createElement("span",{className:"d-none d-md-inline ml-1",style:{position:"absolute",left:"10%"}},"Secret Notes"))),u.a.createElement("a",{className:"toggle-sidebar d-sm-inline d-md-none d-lg-none",onClick:e.toggleOpen},u.a.createElement("i",{className:"material-icons"},"\ue5c4"))))},B=a(416),R=u.a.forwardRef((function(e,t){return u.a.createElement(T.a,Object.assign({direction:"up",ref:t},e))})),V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={open:!0,name:"",error:!1,userData:a.props.userData,token:a.props.token},a.onCreate=function(){a.state.name.length>15||a.state.name.length<1?a.setState({error:!0}):(a.setState({error:!1}),a.props.onCreate(a.state.name,a.state.userData._id,a.state.token),a.props.handleClose())},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement("div",null,u.a.createElement(w.a,{open:!0,TransitionComponent:R,keepMounted:!0,onClose:this.props.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},u.a.createElement("div",{style:{padding:10}},u.a.createElement(M.a,{id:"alert-dialog-slide-title"},"Create A new Secret Notebook"),u.a.createElement(B.a,null,u.a.createElement(p.l,{placeholder:"Notebook Name",value:this.state.name,invalid:this.state.error,onChange:function(t){return e.setState({name:t.target.value})}})),u.a.createElement(I.a,null,u.a.createElement("div",{className:"div-center"},u.a.createElement("button",{type:"button",className:"mb-2 btn btn-md btn-primary mr-1 ",onClick:this.onCreate},"Create"))))))}}]),t}(u.a.Component),W=a(348),q=a.n(W),J=a(350),G=a.n(J),K=a(349),Q=a.n(K),X=function(e){return u.a.createElement("div",null,u.a.createElement(p.t,{onClick:function(){return e.onClick(e.index)},active:e.selected},u.a.createElement(p.u,null,u.a.createElement("div",{className:"flex-center",style:{float:"left"}},e.name&&u.a.createElement("span",{style:{marginRight:10}},e.name),e.icon&&u.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.icon}})),u.a.createElement("div",{style:{float:"right"}},u.a.createElement("div",{className:"flex-spaced"},e.default&&e.selected&&!e.isEditable&&u.a.createElement("div",null,u.a.createElement(q.a,{fontSize:"small",className:"icon-material-ui",onClick:function(t){t.stopPropagation(),e.toggleEditNotebook()}})),e.default&&e.selected&&e.isEditable&&u.a.createElement("div",{style:{marginLeft:10}},u.a.createElement(Q.a,{onClick:function(t){t.stopPropagation(),e.toggleEditNotebook()},style:{color:"#35fc03"},fontSize:"small",className:"icon-material-ui"})),e.default&&e.selected&&u.a.createElement("div",{style:{marginLeft:10}},u.a.createElement(G.a,{onClick:function(t){t.stopPropagation(),e.onDeleteNotebook()},fontSize:"small",className:"icon-material-ui"})))))))},Z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).onDeleteNotebook=function(){Object(P.c)(a.state.notebooks[a.state.currentNotebookIndex]._id,a.state.token).then((function(){return a.props.refreshNotebooks(a.state.userData,a.state.token)}))},a.renderNotebooks=function(e,t){return e&&e.map((function(e,n){return u.a.createElement(X,{key:n,name:e.name,isEditable:a.props.isEditable,onClick:a.props.loadNotes,index:n,selected:n===t,onDeleteNotebook:a.openDeleteModal,toggleEditNotebook:a.props.toggleEditNotebook,default:!0})}))},a.openNewNotepadModal=function(){a.setState({newNotepadModal:!0})},a.closeNewNotepadModal=function(){a.setState({newNotepadModal:!1})},a.openDeleteModal=function(){a.setState({deleteModal:!0})},a.closeDeleteModal=function(){a.setState({deleteModal:!1})},a.onCreate=function(e,t,n){return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:Object(P.a)(e,t,n).then((function(){a.props.refreshNotebooks(a.state.userData,n)}));case 1:case"end":return o.stop()}}))},a.state={userData:a.props.userData,token:a.props.token,notebooks:a.props.notebooks,newNotepadModal:!1,deleteModal:!1,currentNotebookIndex:a.props.currentNotebookIndex,isEditable:a.props.isEditable},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.notebooks,a=e.newNotepadModal,n=e.userData,o=e.token,r=e.currentNotebookIndex,s=e.deleteModal;return u.a.createElement("div",{className:"nav-wrapper"},u.a.createElement(p.s,{className:"nav--no-borders flex-column"},u.a.createElement("div",{style:{cursor:"pointer"}},u.a.createElement(X,{icon:'<i class="material-icons">edit</i>',name:"New Notebook",onClick:this.openNewNotepadModal,default:!1})),this.renderNotebooks(t,r)),a&&u.a.createElement(V,{handleClose:this.closeNewNotepadModal,userData:n,token:o,onCreate:this.onCreate}),s&&u.a.createElement(U,{handleClose:this.closeDeleteModal,token:o,onConfirm:this.onDeleteNotebook,text:"Notebook"}))}}]),t}(u.a.Component),$=a(351),ee=a.n($),te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).toggleOpen=function(){return a.setState({isOpen:!a.state.isOpen})},a.state={userData:a.props.userData,token:a.props.token,notebooks:a.props.notebooks,isOpen:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.userData,a=e.token,n=e.notebooks,o=H()("main-sidebar","px-0","col-12",this.state.isOpen?"open":"");return u.a.createElement("div",null,u.a.createElement(p.d,{tag:"aside",className:o,lg:{size:2},md:{size:3}},u.a.createElement(Y,{toggleOpen:this.toggleOpen}),u.a.createElement(Z,{userData:t,token:a,notebooks:n,loadNotes:this.props.loadNotes,key:t&&a&&n[0]&&n[0]._id&&this.props.currentNotebookIndex&&this.props.isEditable,currentNotebookIndex:this.props.currentNotebookIndex,onSubmit:this.onCreate,refreshNotebooks:this.props.refreshNotebooks,toggleEditNotebook:this.props.toggleEditNotebook,isEditable:this.props.isEditable})),u.a.createElement(ee.a,{className:"menu-icon",onClick:this.toggleOpen}))}}]),t}(u.a.Component),ae=a(391),ne=function(e){var t=e.title,a=e.subtitle,n=e.className,o=Object(ae.a)(e,["title","subtitle","className"]),r=H()(n,"text-center","text-md-left","mb-sm-0");return u.a.createElement(p.d,Object.assign({xs:"12",sm:"4",className:r},o),u.a.createElement("span",{className:"text-uppercase page-subtitle"},a),u.a.createElement("h3",{className:"page-title"},t))},oe=a(3),re=a(241),se=a(387),le=a.n(se),ie=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).getFile=function(e){var t=e.target.files[0];t&&a.setState({imageToUpload:t},(function(){a.uploadImage(),a.setState({loading:!0})}))},a.handleChangeFile=function(){a.refs.fileUploader.click()},a.uploadImage=function(){Object(P.n)(a.state.imageToUpload,a.state.token).then((function(e){e.data&&a.setState({error:!1},(function(){return a.props.changeAvatar(e.data)}))})).catch((function(e){a.setState({error:!0})}))},a.renderProfileImage=function(e){return e?u.a.createElement("div",{className:"flex-center"},u.a.createElement("div",{onError:null,style:{backgroundImage:"url(".concat(oe.HOSTNAME,"/").concat(e,")")},className:"profile-avatar-main"})):u.a.createElement("div",{className:"flex-center"},u.a.createElement(re.a,{name:a.state.firstName,round:!0,size:"10vw",className:"rounded-circle mr-2"}))},a.state={firstName:a.props.userData&&a.props.userData.firstName,lastName:a.props.userData&&a.props.userData.lastName,email:a.props.userData&&a.props.userData.email,currentSecret:a.props.userData&&a.props.userData.currentSecret,token:a.props.token,avatar:a.props.profileImage,imageToUpload:null,error:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return u.a.createElement(p.b,{small:!0,className:"mb-4 pt-3"},u.a.createElement(p.c,{className:"border-bottom text-center"},u.a.createElement("div",{className:"mb-3 mx-auto"},this.renderProfileImage(this.state.avatar),u.a.createElement("input",{onChange:this.getFile,style:{display:"none"},type:"file",ref:"fileUploader"})),u.a.createElement("h4",{className:"mb-0"},this.state.firstName),u.a.createElement("span",{className:"text-muted d-block mb-2"},this.state.jobTitle),u.a.createElement(p.a,{pill:!0,outline:!0,size:"sm",className:"mb-2",onClick:this.handleChangeFile,style:{paddingLeft:50,paddingRight:50}},u.a.createElement(le.a,{className:"material-icons mr-1"},"Change Image"))),this.state.error&&u.a.createElement("h8",{style:{color:"red",textAlign:"center",marginTop:10}},"We Encountered An Error"),u.a.createElement(p.q,{flush:!0},u.a.createElement(p.r,{className:"px-4"},u.a.createElement("div",{className:"text-center",style:{padding:20}},u.a.createElement("h6",{className:"mb-0 text-center"},"Personalize Your Profile with a better photo of Yourself"," ")))))}}]),t}(u.a.Component),ce=a(19),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.onSaveChanges=function(){if(a.areChangesAllowed(a.state)){var e={firstName:a.state.firstName,lastName:a.state.lastName,email:a.state.email,secret:a.state.secret};a.updateChanges(e)}},a.updateChanges=function(e){Object(P.m)(e,a.state.token).then((function(e){a.props.updateChanges(e.data)}))},a.areChangesAllowed=function(e){var t=e.firstName,a=e.lastName,n=e.email;return t.length>0&&a.length>0&&n.length>0},a.state={firstName:a.props.userData&&a.props.userData.firstName,lastName:a.props.userData&&a.props.userData.lastName,email:a.props.userData&&a.props.userData.email,secret:a.props.userData&&a.props.userData.secret,token:a.props.token},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.lastName,n=e.secret,o=e.email;return u.a.createElement(p.b,{small:!0,className:"mb-4"},u.a.createElement(p.c,{className:"border-bottom"},u.a.createElement("h6",{className:"m-0"},"Your Profile")),u.a.createElement(p.q,{flush:!0},u.a.createElement(p.r,{className:"p-3"},u.a.createElement(p.x,null,u.a.createElement(p.d,null,u.a.createElement(p.k,null,u.a.createElement(p.x,{form:!0},u.a.createElement(p.d,{md:"6",className:"form-group"},u.a.createElement("label",{htmlFor:"feFirstName"},"First Name"),u.a.createElement(p.l,{id:"feFirstName",name:"firstName",placeholder:"First Name",value:t||"",onChange:this.handleChange})),u.a.createElement(p.d,{md:"6",className:"form-group"},u.a.createElement("label",{htmlFor:"feLastName"},"Last Name"),u.a.createElement(p.l,{name:"lastName",id:"feLastName",placeholder:"Last Name",value:a||"",onChange:this.handleChange}))),u.a.createElement(p.x,{form:!0},u.a.createElement(p.d,{className:"form-group"},u.a.createElement("label",{htmlFor:"feEmail"},"Email"),u.a.createElement(p.l,{name:"email",type:"email",id:"feEmail",placeholder:"Email Address",value:o||"",onChange:this.handleChange,autoComplete:"email"}))),u.a.createElement(p.x,{form:!0},u.a.createElement(p.d,{md:"12",className:"form-group"},u.a.createElement("label",{htmlFor:"feDescription"},"Current Secret"),u.a.createElement(p.m,{name:"secret",id:"feDescription",rows:"5",onChange:this.handleChange,value:n||""}))),u.a.createElement("div",{className:"flex-center"},u.a.createElement(p.a,{theme:"primary",className:"mb-2 mr-1",onClick:this.onSaveChanges},"Save Changes"))))))))}}]),t}(u.a.Component),de=function(e){return u.a.createElement(p.f,{fluid:!0,className:"main-content-container px-4"},u.a.createElement(p.x,{noGutters:!0,className:"page-header py-4"},u.a.createElement(ne,{title:"User Profile",subtitle:"Overview",md:"12",className:"ml-sm-auto mr-sm-auto"})),u.a.createElement(p.x,null,u.a.createElement(p.d,{lg:"4"},u.a.createElement(ie,{userData:e.userData,token:e.token,profileImage:e.profileImage,changeAvatar:e.changeAvatar})),u.a.createElement(p.d,{lg:"8"},u.a.createElement(me,{userData:e.userData,token:e.token,updateChanges:e.updateChanges}))))},ue=function(e){return u.a.createElement(p.k,{className:"main-navbar__search w-100 d-none d-md-flex d-lg-flex"},u.a.createElement(p.n,{seamless:!0,className:"ml-3"},u.a.createElement(p.o,{type:"prepend"},u.a.createElement(p.p,null,u.a.createElement("i",{className:"material-icons"},"search"))),u.a.createElement(p.l,{onChange:e.handleSearchChange,value:e.searchValue,className:"navbar-search",placeholder:"Search In Your Notes..."})))},pe=a(25),he=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).onUserLogout=function(){Object(P.i)(a.state.token).then((function(){return a.props.history.push("/login")}))},a.renderProfileImage=function(e){return e?u.a.createElement("div",{className:"container-profile-avatar-small"},u.a.createElement("img",{alt:"profile-avatar",src:"".concat(oe.HOSTNAME,"/").concat(e),className:"profile-avatar-small"})):u.a.createElement(re.a,{name:a.state.userData.firstName,round:!0,size:40,className:"rounded-circle mr-2"})},a.navTo=function(e){return a.props.history.push("".concat(a.props.match.path,"/").concat(e))},a.state={visible:!1,userData:a.props.userData,token:a.props.token},a.toggleUserActions=a.toggleUserActions.bind(Object(pe.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"toggleUserActions",value:function(){this.setState({visible:!this.state.visible})}},{key:"render",value:function(){var e=this;return u.a.createElement(p.t,{tag:p.g,caret:!0,toggle:this.toggleUserActions},u.a.createElement("div",{className:"profile-top"},this.state.userData&&this.renderProfileImage(this.props.profileImage)," ",u.a.createElement(p.j,{caret:!0,tag:p.u,className:"text-nowrap px-3"},u.a.createElement("span",{className:"d-none d-md-inline-block"},this.state.userData&&this.state.userData.firstName))),u.a.createElement(p.e,{tag:p.i,right:!0,small:!0,open:this.state.visible},u.a.createElement(p.h,{onClick:function(){return e.navTo("profile")}},u.a.createElement("i",{className:"material-icons"},"\ue7fd")," Profile"),u.a.createElement(p.h,{onClick:function(){return e.navTo("")}},u.a.createElement("i",{className:"material-icons"},"\ue896")," My Notes"),u.a.createElement(p.h,{divider:!0}),u.a.createElement(p.h,{to:"/login",className:"text-danger",onClick:function(){e.onUserLogout(),e.navTo("login")}},u.a.createElement("i",{className:"material-icons text-danger"},"\ue879")," Logout")))}}]),t}(u.a.Component),fe=Object(h.g)(he),be=H()("main-navbar","bg-white","sticky-top"),ge=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={userData:a.props.userData,searchLoading:!1,token:a.props.token},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.userData,a=e.token,n=this.props.profileImage;return u.a.createElement("div",{className:be,key:t},u.a.createElement(p.f,{className:"p-0"},u.a.createElement(p.v,{type:"light",className:"align-items-stretch flex-md-nowrap p-0"},u.a.createElement(ue,{handleSearchChange:this.props.handleSearchChange,searchTerm:this.props.searchValue}),u.a.createElement(fe,{token:a,userData:t,profileImage:n}))))}}]),t}(u.a.PureComponent),Ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,l=new Array(o),m=0;m<o;m++)l[m]=arguments[m];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l))))._isMounted=!1,a.state={loading:!0,userData:null,profileImage:null,error:!1,token:null,notebooks:[],currentNotes:[],currentNotebook:{},currentNotebookIndex:0,showedNotes:[],isEditable:!1,searchTerm:""},a.getAvatar=function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(P.f)(e));case 2:(t=n.sent)&&a.setState({profileImage:t.data});case 4:case"end":return n.stop()}}))},a.loadNotebooks=function(e,t){var o,s;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,r.a.awrap(Object(P.d)(e._id,t));case 2:o=l.sent,s=o.data,a.setState({notebooks:Object(n.a)(s)},(function(){return s.length>0&&a.loadNotes(0)}));case 5:case"end":return l.stop()}}))},a.createDefaultNotebook=function(){a.setState({startTip:!0})},a.loadNotes=function(e){var t,n;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.state.notebooks[e],a.setState({currentNotebookIndex:-1}),o.next=4,r.a.awrap(Object(P.e)(t._id,a.state.token));case 4:n=o.sent,a.setState({currentNotes:a.sortNotes(n.data),showedNotes:a.sortNotes(n.data),currentNotebook:t,currentNotebookIndex:e,isEditable:!1,loading:!1});case 6:case"end":return o.stop()}}))},a.sortNotes=function(e){return e.notes},a.toggleEditNotebook=function(){a.state.isEditable?a.saveEditNotebook():a.setState({isEditable:!a.state.isEditable})},a.saveEditNotebook=function(){a.setState({isEditable:!1}),Object(P.l)(a.state.currentNotebook,a.state.token)},a.onChangeNotebookName=function(e){var t=a.state.currentNotebook;t.name=e.target.value,a.setState({currentNotebook:t})},a.handleSearchNotes=function(e){return a.setState({searchTerm:e.target.value,searchLoading:!0},(function(){return a.handleSearchTerm(a.state.searchTerm)}))},a.handleSearchTerm=function(e){var t=Object(n.a)(a.state.currentNotes),o=new RegExp(e,"gi"),r=t.reduce((function(e,t){return(t.note.title.match(o)||t.note.description.match(o))&&e.push(t),e}),[]);a.setState({showedNotes:r})},a.updateUser=function(e){a.setState({userData:null},(function(){return a.setState({userData:e})}))},a.changeAvatar=function(e){a.setState({profileImage:null},(function(){return a.setState({profileImage:e})}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=this.props.location.userToken;t||this.props.history.push("/login"),Object(P.g)(t).then((function(a){e._isMounted&&(e.getAvatar(t),e.loadNotebooks(a.data,t),e.setState({token:t}),e.setState({userData:a.data}),e.setState({loading:!1}))})).catch((function(t){e.setState({error:!0}),e.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.props.match,a=this.state,n=a.userData,o=a.token,r=a.notebooks,s=a.currentNotebook,l=a.loading,i=a.currentNotebookIndex,c=a.showedNotes,m=a.isEditable,d=a.profileImage,f=a.searchTerm;return u.a.createElement("div",null,u.a.createElement(p.f,{fluid:!0},u.a.createElement(p.x,null,u.a.createElement(te,{userData:n,token:o,key:o&&n&&r[0]&&r[0]._id&&i,notebooks:r,loadNotes:this.loadNotes,currentNotebookIndex:i,refreshNotebooks:this.loadNotebooks,toggleEditNotebook:this.toggleEditNotebook,isEditable:m}),u.a.createElement(p.d,{className:"main-content p-0",lg:{size:10,offset:2},md:{size:9,offset:3},sm:"12",tag:"main"},u.a.createElement(ge,{userData:n,token:o,handleSearchChange:this.handleSearchNotes,searchValue:f,profileImage:d,key:n&&n.firstName}),u.a.createElement(h.d,null,u.a.createElement(h.b,{exact:!0,path:t.path,render:function(){return u.a.createElement(L,{userData:n&&n,loading:l,firstNotebook:r[0],token:o,notes:c,NotebookId:s._id,notebookHeader:s.name,isEditable:m,onChangeNoteBookName:e.onChangeNotebookName,key:n&&r[0]&&r[0]._id&&i})}}),u.a.createElement(h.b,{exact:!0,path:"".concat(t.path,"/profile"),render:function(){return u.a.createElement(de,{component:de,updateChanges:e.updateUser,profileImage:d,userData:n,token:o,key:n&&n._id,changeAvatar:e.changeAvatar})}}))))))}}]),t}(d.Component);t.default=Object(h.g)(Ne)}}]);
//# sourceMappingURL=4.eafe203c.chunk.js.map