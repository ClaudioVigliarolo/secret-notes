(this["webpackJsonpsecret-notes"]=this["webpackJsonpsecret-notes"]||[]).push([[0],{18:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return m})),n.d(t,"a",(function(){return h})),n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return g})),n.d(t,"o",(function(){return v})),n.d(t,"j",(function(){return N})),n.d(t,"l",(function(){return b})),n.d(t,"c",(function(){return w})),n.d(t,"k",(function(){return y})),n.d(t,"m",(function(){return S})),n.d(t,"n",(function(){return A}));var a=n(2),r=n.n(a),c=n(4),o=n.n(c),s=n(37),l=n.n(s),i=n(3),u=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.a.post("".concat(i.HOSTNAME,"/users"),{newUser:e}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return t.stop()}}))},m=function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o.a.post("".concat(i.HOSTNAME,"/users/login"),{email:e,password:t}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return n.stop()}}))},h=function(e,t,n){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",o.a.post(i.HOSTNAME+"/noteBooks",{name:e,owner:t},{headers:{Authorization:"Bearer "+n}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return a.stop()}}))},d=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:o.a.get(i.HOSTNAME+"/users/me",{headers:{Authorization:"Bearer "+e}}).then((function(e){return e})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}))},f=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.a.get(i.HOSTNAME+"/users/me",{headers:{Authorization:"Bearer "+e}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return t.stop()}}))},p=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.a.get(i.HOSTNAME+"/users/me/avatar",{headers:{Authorization:"Bearer "+e}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return t.stop()}}))},E=function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o.a.get("".concat(i.HOSTNAME,"/noteBooks/").concat(e),{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}))},g=function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o.a.get("".concat(i.HOSTNAME,"/noteBook/").concat(e),{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}))},v=function(e,t,n){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",o.a.post("".concat(i.HOSTNAME,"/noteBooks/").concat(t),{note:e},{headers:{Authorization:"Bearer "+n}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return a.stop()}}))},N=function(e,t,n){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",o.a.delete("".concat(i.HOSTNAME,"/noteBook/").concat(e,"/").concat(t),{headers:{Authorization:"Bearer "+n}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return a.stop()}}))},b=function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o.a.patch("".concat(i.HOSTNAME,"/noteBook/").concat(e._id),{name:e.name},{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}))},w=function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o.a.delete("".concat(i.HOSTNAME,"/noteBook/").concat(e),{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}))},y=function(e,t,n,a){return r.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",o.a.patch("".concat(i.HOSTNAME,"/noteBook/").concat(e,"/").concat(t),{note:n},{headers:{Authorization:"Bearer "+a}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return r.stop()}}))},S=function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",o.a.patch("".concat(i.HOSTNAME,"/users/me"),{newUserData:e},{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}))},A=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return(n=new l.a).append("avatar",e,e.filename),a.abrupt("return",o.a.post("".concat(i.HOSTNAME,"/users/me/avatar"),n,{headers:{Authorization:"Bearer "+t,"Content-Type":"multipart/form-data"}}).then((function(e){return e})).catch((function(e){return e})));case 3:case"end":return a.stop()}}))}},3:function(e,t,n){e.exports={HOSTNAME:"https://secretnotes.herokuapp.com"}},40:function(e,t,n){e.exports=n(69)},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),o=n.n(c),s=n(10),l=n(9),i=n(19),u=n(13),m=n(14),h=n(16),d=n(15),f=n(17),p=n(18),E=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",errors:[],loading:""},n.displayErrors=function(e){return e.map((function(e,t){return e.message}))},n.handleChange=function(e){n.setState(Object(i.a)({},e.target.name,e.target.value))},n.handleInputError=function(){return n.state.errors.length>0?"form-control is-invalid":"form-control"},n.handleSubmit=function(e){e.preventDefault(),n.loginUser(n.state)},n.loginUser=function(e){var t=e.email,a=e.password;Object(p.h)(t,a).then((function(e){n.props.history.push({pathname:"/secretNotes",userToken:e.data.token})})).catch((function(){n.setState({errors:[].concat({message:"Unable To Login"})})}))},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.errors;return r.a.createElement("div",{className:"div-center form-responsive-login"},r.a.createElement("div",{className:"card card-small mb-4"},r.a.createElement("div",{className:"card-header border-bottom"},r.a.createElement("h4",{className:"text-center"},"Login")),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item p-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"flex-column-center"},r.a.createElement("div",{className:"form-group col-md-6  "},r.a.createElement("label",{htmlFor:"feEmailAddress",onChange:this.handleChange},"Email"),r.a.createElement("input",{name:"email",type:"email",className:this.handleInputError(a),id:"feEmailAddress",placeholder:"Email",value:t,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group col-md-6",style:{marginTop:10}},r.a.createElement("label",{htmlFor:"fePassword"},"Password"),r.a.createElement("input",{name:"password",type:"password",className:this.handleInputError(a),id:"fePassword",onChange:this.handleChange,value:n,placeholder:"Password"})," ")),r.a.createElement("h6",{className:"text-center",style:{color:"red"}},this.displayErrors(a)),r.a.createElement("div",{className:"flex-center"},r.a.createElement("button",{type:"submit",className:"btn btn-accent",style:{marginTop:10}},"Sign In")))))))),r.a.createElement(l.b,{to:"/register",className:"bottom-nav-text "}," ",r.a.createElement("h6",null," ","Register ",r.a.createElement("i",{className:"arrow right bottom-nav-text-i"})," ")))}}]),t}(a.Component),g=Object(s.g)(E),v=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",lastName:"",email:"",password:"",secret:"",errors:[]},n.displayErrors=function(e){return e.map((function(e,t){return e.message}))},n.handleChange=function(e){n.setState(Object(i.a)({},e.target.name,e.target.value))},n.handleSecretChange=function(e){n.setState({secret:e.target.value})},n.handleInputError=function(e,t){return e.some((function(e){return e.form&&e.form.includes(t)}))?"form-control is-invalid":"form-control"},n.handleSubmit=function(e){e.preventDefault(),n.isFormValid()&&(n.setState({errors:[]}),n.saveUser(n.state))},n.getEmptyFields=function(e){var t=[];return Object.keys(e).forEach((function(n){""===e[n]&&t.push(n)})),t.toString()},n.isFormValid=function(){var e,t=[];return n.isFormEmpty(n.state)?(e={message:"Fill in all fields",form:n.getEmptyFields(n.state)},n.setState({errors:t.concat(e)}),!1):!!n.isPasswordValid(n.state)||(e={message:"The Password must be Stronger"},n.setState({errors:t.concat(e)}),!1)},n.isFormEmpty=function(e){var t=e.firstName,n=e.lastName,a=e.password,r=e.email,c=e.secret;return!t.length||!n.length||!c.length||!r.length||!a.length},n.saveUser=function(e){var t=e.firstName,a=e.lastName,r=e.email,c=e.password,o=e.secret;Object(p.b)({firstName:t,lastName:a,email:r,password:c,secret:o}).then((function(){n.props.history.push("/login")})).catch((function(e){e={message:"Server Error"},n.setState({errors:[].concat(e)})}))},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"isPasswordValid",value:function(e){var t=e.password,n=/[A-Z]/,a=/[a-z]/,r=/[0-9]/,c=/[!|@|#|$|%|^|&|*|(|)|-|_]/;if(t.length<8)return!1;for(var o=0,s=0,l=0,i=0,u=0;u<t.length;u++)n.test(t[u])?o++:a.test(t[u])?s++:r.test(t[u])?l++:c.test(t[u])&&i++;return!(o<1||s<1||l<1||i<1)}},{key:"render",value:function(){var e=this.state,t=e.firstName,n=e.lastName,a=e.email,c=e.password,o=e.secret,s=e.errors;return r.a.createElement("div",{className:"div-center form-responsive",style:{marginBottom:100}},r.a.createElement("div",{className:"card card-small mb-4"},r.a.createElement("div",{className:"card-header border-bottom"},r.a.createElement("h4",{className:"text-center"},"Registration")),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item p-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"feFirstName"},"First Name"),r.a.createElement("input",{name:"firstName",type:"text",className:this.handleInputError(s,"firstName"),id:"feFirstName",placeholder:"First Name",value:t,onChange:this.handleChange})," "),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"feLastName"},"Last Name"),r.a.createElement("input",{name:"lastName",type:"text",className:this.handleInputError(s,"lastName"),id:"feLastName",placeholder:"Last Name",value:n,onChange:this.handleChange})," ")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"feEmailAddress",onChange:this.handleChange},"Email"),r.a.createElement("input",{name:"email",type:"email",className:this.handleInputError(s,"email"),id:"feEmailAddress",placeholder:"Email",value:a,onChange:this.handleChange})," "),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"fePassword"},"Password"),r.a.createElement("input",{name:"password",type:"password",className:this.handleInputError(s,"password"),id:"fePassword",onChange:this.handleChange,value:c,placeholder:"Password"})," ")),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("h6",{className:"text-center",onChange:this.handleChange,value:o},"Greatest Secret"),r.a.createElement("textarea",{name:"secret",className:this.handleInputError(s,"secret"),rows:5,placeholder:"I love putin",onChange:this.handleSecretChange,value:o})),s.length>0&&r.a.createElement("h6",{className:"text-center",style:{color:"red"}},this.displayErrors(s)),r.a.createElement("div",{className:"flex-center"},r.a.createElement("button",{type:"submit",className:"btn btn-accent"},"Sign up")))))))),r.a.createElement(l.b,{to:"/login",className:"bottom-nav-text registation"}," ",r.a.createElement("h6",null," ","Login ",r.a.createElement("i",{className:"arrow right bottom-nav-text-i"})," ")))}}]),t}(a.Component),N=Object(s.g)(v),b=Object(s.g)((function(e){return r.a.createElement("div",{className:"error"},r.a.createElement("div",{className:"error__content"},r.a.createElement("h2",null,"404"),r.a.createElement("h3",null,"This page is not available"),r.a.createElement("p",null,"Please go back to Login"),r.a.createElement("button",{type:"button",className:"btn btn-accent btn-pill",onClick:function(){e.history.push("/login")}},"\u2190 Go Back")))})),w=(n(66),n(67),n(68),Object(a.lazy)((function(){return Promise.all([n.e(2),n.e(4)]).then(n.bind(null,418))})));var y=Object(s.g)((function(){return r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(s.a,{to:"/login"})}}),r.a.createElement(s.b,{exact:!0,path:"/register",render:function(){return r.a.createElement(N,{component:N})}}),r.a.createElement(s.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(g,{component:g})}}),r.a.createElement(s.b,{path:"/secretNotes",render:function(){return r.a.createElement(w,{component:(e=w,function(t){return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(e,t))})});var e}}),r.a.createElement(s.b,{path:"",component:b}))}));o.a.render(r.a.createElement(l.a,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[40,1,3]]]);
//# sourceMappingURL=main.60e94ade.chunk.js.map