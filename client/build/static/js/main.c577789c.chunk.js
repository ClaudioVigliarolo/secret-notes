(this["webpackJsonpsecret-notes"]=this["webpackJsonpsecret-notes"]||[]).push([[3],{103:function(e,t,a){e.exports=a(203)},19:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"h",(function(){return m})),a.d(t,"a",(function(){return h})),a.d(t,"i",(function(){return d})),a.d(t,"g",(function(){return f})),a.d(t,"f",(function(){return p})),a.d(t,"d",(function(){return g})),a.d(t,"e",(function(){return b})),a.d(t,"o",(function(){return E})),a.d(t,"j",(function(){return N})),a.d(t,"l",(function(){return v})),a.d(t,"c",(function(){return k})),a.d(t,"k",(function(){return w})),a.d(t,"m",(function(){return y})),a.d(t,"n",(function(){return S}));var n=a(5),r=a.n(n),o=a(10),s=a.n(o),c=a(96),i=a.n(c),l=a(9),u=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.a.post("".concat(l.HOSTNAME,"/users"),{newUser:e}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return t.stop()}}))},m=function(e,t){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",s.a.post("".concat(l.HOSTNAME,"/users/login"),{email:e,password:t}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return a.stop()}}))},h=function(e,t,a){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s.a.post(l.HOSTNAME+"/noteBooks",{name:e,owner:t},{headers:{Authorization:"Bearer "+a}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}))},d=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:s.a.get(l.HOSTNAME+"/users/me",{headers:{Authorization:"Bearer "+e}}).then((function(e){return e})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}))},f=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.a.get(l.HOSTNAME+"/users/me",{headers:{Authorization:"Bearer "+e}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return t.stop()}}))},p=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.a.get(l.HOSTNAME+"/users/me/avatar",{headers:{Authorization:"Bearer "+e}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return t.stop()}}))},g=function(e,t){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",s.a.get("".concat(l.HOSTNAME,"/noteBooks/").concat(e),{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return a.stop()}}))},b=function(e,t){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",s.a.get("".concat(l.HOSTNAME,"/noteBook/").concat(e),{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return a.stop()}}))},E=function(e,t,a){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s.a.post("".concat(l.HOSTNAME,"/noteBooks/").concat(t),{note:e},{headers:{Authorization:"Bearer "+a}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}))},N=function(e,t,a){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s.a.delete("".concat(l.HOSTNAME,"/noteBook/").concat(e,"/").concat(t),{headers:{Authorization:"Bearer "+a}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}))},v=function(e,t){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",s.a.patch("".concat(l.HOSTNAME,"/noteBook/").concat(e._id),{name:e.name},{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return a.stop()}}))},k=function(e,t){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",s.a.delete("".concat(l.HOSTNAME,"/noteBook/").concat(e),{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return a.stop()}}))},w=function(e,t,a,n){return r.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",s.a.patch("".concat(l.HOSTNAME,"/noteBook/").concat(e,"/").concat(t),{note:a},{headers:{Authorization:"Bearer "+n}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return r.stop()}}))},y=function(e,t){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",s.a.patch("".concat(l.HOSTNAME,"/users/me"),{newUserData:e},{headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){console.log(e)})));case 1:case"end":return a.stop()}}))},S=function(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new i.a).append("avatar",e,e.filename),n.abrupt("return",s.a.post("".concat(l.HOSTNAME,"/users/me/avatar"),a,{headers:{Authorization:"Bearer "+t,"Content-Type":"multipart/form-data"}}).then((function(e){return e})).catch((function(e){return e})));case 3:case"end":return n.stop()}}))}},200:function(e,t,a){},201:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),s=a.n(o),c=a(25),i=a(16),l=a(45),u=a(31),m=a(32),h=a(34),d=a(33),f=a(35),p=a(19),g=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",errors:[],loading:""},a.displayErrors=function(e){return e.map((function(e,t){return e.message}))},a.handleChange=function(e){a.setState(Object(l.a)({},e.target.name,e.target.value))},a.handleInputError=function(){return a.state.errors.length>0?"form-control is-invalid":"form-control"},a.handleSubmit=function(e){e.preventDefault(),a.loginUser(a.state)},a.loginUser=function(e){var t=e.email,n=e.password;Object(p.h)(t,n).then((function(e){a.props.history.push({pathname:"/secretNotes",userToken:e.data.token})})).catch((function(){a.setState({errors:[].concat({message:"Unable To Login"})})}))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.errors;return r.a.createElement("div",{className:"div-center form-responsive-login"},r.a.createElement("div",{className:"card card-small mb-4"},r.a.createElement("div",{className:"card-header border-bottom"},r.a.createElement("h4",{className:"text-center"},"Login")),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item p-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"flex-column-center"},r.a.createElement("div",{className:"form-group col-md-6  "},r.a.createElement("label",{htmlFor:"feEmailAddress",onChange:this.handleChange},"Email"),r.a.createElement("input",{name:"email",type:"email",className:this.handleInputError(n),id:"feEmailAddress",placeholder:"Email",value:t,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group col-md-6",style:{marginTop:10}},r.a.createElement("label",{htmlFor:"fePassword"},"Password"),r.a.createElement("input",{name:"password",type:"password",className:this.handleInputError(n),id:"fePassword",onChange:this.handleChange,value:a,placeholder:"Password"})," ")),r.a.createElement("h6",{className:"text-center",style:{color:"red"}},this.displayErrors(n)),r.a.createElement("div",{className:"flex-center"},r.a.createElement("button",{type:"submit",className:"btn btn-accent",style:{marginTop:10}},"Sign In")))))))),r.a.createElement(i.b,{to:"/register",className:"bottom-nav-text "}," ",r.a.createElement("h6",null," ","Register ",r.a.createElement("i",{className:"arrow right bottom-nav-text-i"})," ")))}}]),t}(n.Component),b=Object(c.g)(g),E=a(42),N=a(5),v=a.n(N),k=a(43),w=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(6),a.e(7)]).then(a.bind(null,420))})),y=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(9)]).then(a.bind(null,418))})),S=r.a.lazy((function(){return Promise.all([a.e(1),a.e(10)]).then(a.bind(null,421))})),x=r.a.lazy((function(){return Promise.all([a.e(0),a.e(2),a.e(8)]).then(a.bind(null,419))})),O=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={loading:!0,userData:null,profileImage:null,error:!1,token:null,notebooks:[],currentNotes:[],currentNotebook:{},currentNotebookIndex:0,showedNotes:[],isEditable:!1,searchTerm:""},a.getAvatar=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(Object(p.f)(e));case 2:(t=n.sent)&&a.setState({profileImage:t.data});case 4:case"end":return n.stop()}}))},a.loadNotebooks=function(e,t){var n,r;return v.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,v.a.awrap(Object(p.d)(e._id,t));case 2:n=o.sent,console.log("datttttttttttttt",n),r=n.data,a.setState({notebooks:Object(E.a)(r)},(function(){return r.length>0&&a.loadNotes(0)}));case 6:case"end":return o.stop()}}))},a.createDefaultNotebook=function(){a.setState({startTip:!0})},a.loadNotes=function(e){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=a.state.notebooks[e],a.setState({currentNotebookIndex:-1}),r.next=4,v.a.awrap(Object(p.e)(t._id,a.state.token));case 4:n=r.sent,console.log("notsdtaaaaaaaaa",n),a.setState({currentNotes:Object(E.a)(a.sortNotes(n.data)),showedNotes:Object(E.a)(a.sortNotes(n.data)),currentNotebook:t,currentNotebookIndex:e,isEditable:!1,loading:!1});case 7:case"end":return r.stop()}}))},a.sortNotes=function(e){return e.notes},a.toggleEditNotebook=function(){a.state.isEditable?a.saveEditNotebook():a.setState({isEditable:!a.state.isEditable})},a.refreshNotes=function(e){a.setState({currentNotes:e,showedNotes:e})},a.saveEditNotebook=function(){a.setState({isEditable:!1}),Object(p.l)(a.state.currentNotebook,a.state.token)},a.onChangeNotebookName=function(e){var t=a.state.currentNotebook;t.name=e.target.value,a.setState({currentNotebook:t})},a.handleSearchNotes=function(e){return a.setState({searchTerm:e.target.value,searchLoading:!0},(function(){return a.handleSearchTerm(a.state.searchTerm)}))},a.handleSearchTerm=function(e){var t=Object(E.a)(a.state.currentNotes),n=new RegExp(e,"gi"),r=t.reduce((function(e,t){return(t.note.title.match(n)||t.note.description.match(n))&&e.push(t),e}),[]);a.setState({showedNotes:r})},a.updateUser=function(e){a.setState({userData:e})},a.changeAvatar=function(e){a.setState({profileImage:e})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=this.props.location.userToken;t||this.props.history.push("/login"),Object(p.g)(t).then((function(a){e._isMounted&&(e.getAvatar(t),e.loadNotebooks(a.data,t),e.setState({token:t}),e.setState({userData:a.data}),e.setState({loading:!1}))})).catch((function(t){e.setState({error:!0}),e.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.props.match,a=this.state,o=a.userData,s=a.token,i=a.notebooks,l=a.currentNotebook,u=a.loading,m=a.currentNotebookIndex,h=a.showedNotes,d=a.isEditable,f=a.profileImage,p=a.searchTerm;return console.log("new stat",this.state),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null)},r.a.createElement(k.f,{fluid:!0},r.a.createElement(k.x,null,r.a.createElement(x,{userData:o,token:s,key:o&&i[0]&&i[0]._id&&m,notebooks:i,loadNotes:this.loadNotes,currentNotebookIndex:m,refreshNotebooks:this.loadNotebooks,toggleEditNotebook:this.toggleEditNotebook,isEditable:d}),r.a.createElement(k.d,{className:"main-content p-0",lg:{size:10,offset:2},md:{size:9,offset:3},sm:"12",tag:"main"},r.a.createElement(S,{userData:o,token:s,handleSearchChange:this.handleSearchNotes,searchValue:p,profileImage:f,key:o&&o.firstName}),r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:t.path,render:function(){return r.a.createElement(w,{userData:o&&o,loading:u,firstNotebook:i&&i.length>0,token:s,notes:h,NotebookId:l._id,refreshNotes:e.refreshNotes,notebookHeader:l.name,isEditable:d,onChangeNoteBookName:e.onChangeNotebookName})}}),r.a.createElement(c.b,{exact:!0,path:"".concat(t.path,"/profile"),render:function(){return r.a.createElement(y,{component:y,updateChanges:e.updateUser,profileImage:f,userData:o,token:s,key:o&&o._id,changeAvatar:e.changeAvatar})}}))))))}}]),t}(n.Component),A=Object(c.g)(O),j=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",lastName:"",email:"",password:"",secret:"",errors:[]},a.displayErrors=function(e){return e.map((function(e,t){return e.message}))},a.handleChange=function(e){a.setState(Object(l.a)({},e.target.name,e.target.value))},a.handleSecretChange=function(e){a.setState({secret:e.target.value})},a.handleInputError=function(e,t){return e.some((function(e){return e.form&&e.form.includes(t)}))?"form-control is-invalid":"form-control"},a.handleSubmit=function(e){e.preventDefault(),a.isFormValid()&&(a.setState({errors:[]}),a.saveUser(a.state))},a.getEmptyFields=function(e){var t=[];return Object.keys(e).forEach((function(a){""===e[a]&&t.push(a)})),t.toString()},a.isFormValid=function(){var e,t=[];return a.isFormEmpty(a.state)?(e={message:"Fill in all fields",form:a.getEmptyFields(a.state)},a.setState({errors:t.concat(e)}),!1):!!a.isPasswordValid(a.state)||(e={message:"The Password must be Stronger"},a.setState({errors:t.concat(e)}),!1)},a.isFormEmpty=function(e){var t=e.firstName,a=e.lastName,n=e.password,r=e.email,o=e.secret;return!t.length||!a.length||!o.length||!r.length||!n.length},a.saveUser=function(e){var t=e.firstName,n=e.lastName,r=e.email,o=e.password,s=e.secret;Object(p.b)({firstName:t,lastName:n,email:r,password:o,secret:s}).then((function(){a.props.history.push("/login")})).catch((function(e){e={message:"Server Error"},a.setState({errors:[].concat(e)})}))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"isPasswordValid",value:function(e){var t=e.password,a=/[A-Z]/,n=/[a-z]/,r=/[0-9]/,o=/[!|@|#|$|%|^|&|*|(|)|-|_]/;if(t.length<8)return!1;for(var s=0,c=0,i=0,l=0,u=0;u<t.length;u++)a.test(t[u])?s++:n.test(t[u])?c++:r.test(t[u])?i++:o.test(t[u])&&l++;return!(s<1||c<1||i<1||l<1)}},{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.lastName,n=e.email,o=e.password,s=e.secret,c=e.errors;return r.a.createElement("div",{className:"div-center form-responsive",style:{marginBottom:100}},r.a.createElement("div",{className:"card card-small mb-4"},r.a.createElement("div",{className:"card-header border-bottom"},r.a.createElement("h4",{className:"text-center"},"Registration")),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item p-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"feFirstName"},"First Name"),r.a.createElement("input",{name:"firstName",type:"text",className:this.handleInputError(c,"firstName"),id:"feFirstName",placeholder:"First Name",value:t,onChange:this.handleChange})," "),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"feLastName"},"Last Name"),r.a.createElement("input",{name:"lastName",type:"text",className:this.handleInputError(c,"lastName"),id:"feLastName",placeholder:"Last Name",value:a,onChange:this.handleChange})," ")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"feEmailAddress",onChange:this.handleChange},"Email"),r.a.createElement("input",{name:"email",type:"email",className:this.handleInputError(c,"email"),id:"feEmailAddress",placeholder:"Email",value:n,onChange:this.handleChange})," "),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"fePassword"},"Password"),r.a.createElement("input",{name:"password",type:"password",className:this.handleInputError(c,"password"),id:"fePassword",onChange:this.handleChange,value:o,placeholder:"Password"})," ")),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("h6",{className:"text-center",onChange:this.handleChange,value:s},"Greatest Secret"),r.a.createElement("textarea",{name:"secret",className:this.handleInputError(c,"secret"),rows:5,placeholder:"I love putin",onChange:this.handleSecretChange,value:s})),c.length>0&&r.a.createElement("h6",{className:"text-center",style:{color:"red"}},this.displayErrors(c)),r.a.createElement("div",{className:"flex-center"},r.a.createElement("button",{type:"submit",className:"btn btn-accent"},"Sign up")))))))),r.a.createElement(i.b,{to:"/login",className:"bottom-nav-text"}," ",r.a.createElement("h6",null," ","Login ",r.a.createElement("i",{className:"arrow right bottom-nav-text-i"})," ")))}}]),t}(n.Component),C=Object(c.g)(j),T=Object(c.g)((function(e){return r.a.createElement("div",{className:"error"},r.a.createElement("div",{className:"error__content"},r.a.createElement("h2",null,"404"),r.a.createElement("h3",null,"This page is not available"),r.a.createElement("p",null,"Please go back to Login"),r.a.createElement("button",{type:"button",className:"btn btn-accent btn-pill",onClick:function(){e.history.push("/login")}},"\u2190 Go Back")))})),B=(a(199),a(200),a(201),Object(c.g)((function(){return r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",render:function(){return r.a.createElement(c.a,{to:"/login"})}}),r.a.createElement(c.b,{exact:!0,path:"/register",render:function(){return r.a.createElement(C,{component:C})}}),r.a.createElement(c.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(b,{component:b})}}),r.a.createElement(c.b,{path:"/secretNotes",render:function(){return r.a.createElement(A,{component:A})}}),r.a.createElement(c.b,{path:"",component:T}))})));s.a.render(r.a.createElement(i.a,null,r.a.createElement(B,null)),document.getElementById("root"))},9:function(e,t,a){e.exports={HOSTNAME:"https://secretnotes.herokuapp.com"}}},[[103,4,5]]]);
//# sourceMappingURL=main.c577789c.chunk.js.map